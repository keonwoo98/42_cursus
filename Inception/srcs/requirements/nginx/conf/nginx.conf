# Nginx란?
# 가볍고 높은 성능을 가진 Web Server
# HTTP Server로 활용되며 정적 파일들을 처리하기 위해 사용
# Reverse Proxy Server로 활용됨
# 80번 포트로 들어오는 내용을 3000, 4000, 9000 등의 다른 포트로 분산 시켜줌
# 비동기 이벤트 구조를 기반으로 동작

server {
	listen 443 ssl;
	listen [::]:443 ssl;

	ssl on;
	ssl_certificate /etc/ssl/certs/localhost.dev.crt;
	ssl_certificate_key /etc/ssl/private/localhost.dev.key;
	ssl_protocols TLSv1.3;

	# php 파일이 존재하는 디텍터리 경로
	root /var/www/html;

	index index.php;

	location / {
		autoindex on;
		try_files $uri $uri/ = 404;
	}

	location ~ \.php$ {
		include snippets/fastcgi-php.conf;
		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
		fastcgi_pass wordpress:9000;
	}
}

# listen : 해당 포트로 들어오는 요청을 해당 server {} 블록의 내용에 맞게 처리하겠다는 뜻
# server_name : 호스트 이름 지정 (가상 호스트가 있는 경우 해당 호스트명을 넣으면 되고,
# 로컬에서 작업하고 있는 내용을 nginx를 통해 띄우려고 하는 경우에는 localhost라고 적으면 됨)
# error_page : 요청 결과의 http 상태코드가 지정된 http 상태코드와 일치할 경우 해당 url로 이동
# (보통 403, 404, 502 등의 에러처리를 위해 사용)
# location : 처음 요청이 들어왔을 때 보여줄 페이지들이 속해있는 경로와 초기 페이지인 index 지정
# (url로 접속했을 경우 index.html, index.htm으로 정의된 파일들을 보여줌)
