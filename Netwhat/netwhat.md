# **Netwhat**
>Netwhat 기출문제를 풀기 위한 네트워크 개념 잡기

## **IP address**
---

### **1. Network란?**

네트워크는 `Net + Work` 의 합성어로 두 대 이상의 컴퓨터가 논리적 또는 물리적으로 그물망처럼 연결되어 통신이 가능한 상태를 말한다.

네트워크의 종류 :
* PAN (Personal Area Network)
* Lan (Local Area Network)
* MAN (Metropolitan Area Network)
* WAN (Wide Area Network)
* Van (Value Added Network)
* ISDN (Integrated Services Digital Network)

### **2. IP (Internet Protocol) address란?**

컴퓨터 네트워크에서 장치들이 서로를 인식하고 통신을 하기 위해 사용하는 특수한 주소이다. 네트워크에 연결된 장치가 라우터이든 일반 서버이든, 모든 기계는 이 특수한 주소를 가지고 있어야 한다. 네트워크 상에서 통신을 하기 위해서는 몇 가지 통신규약 (protocol)을 따라야 한다. IP 주소는 network ID 부분과 host ID 부분으로 구성되어 있으며 하나의 네트워크 안에서 network 영역이 같아야 하고 host 영역은 서로 달라야 통신이 가능하다.

**IPv4 (IP version 4) :**

오늘날 일반적으로 사용하는 IP 주소이다. 32bit로 구성되어 있으며 4개의 10진수를 .으로 구분하여 `0.0.0.0 ~ 255.255.255.255`의 범위를 갖는다. 중간의 일부 번호들은 특별한 용도를 위해 사용된다. 이를테면 `127.0.0.1`은 로컬 호스트 자기 자신을 가리킨다.

**IPv6 (IP version 6) :**

IP 주소의 부족 현상을 해결하기 위한 차세대 IP 주소 체계이다. IPv4의 주소 공간을 확장한 것으로 128bit 체계의 16진수로 표기하며 4개의 16진수를 콜론(:)으로 구분한다.

### **3. IP 주소 클래스**

IP 주소에는 클래스라는 개념이 있고 이 개념을 알아야 어디까지가 네트워크 영역이고 호스트 영역인지 알 수 있다. 즉, 클래스는 하나의 IP 주소에서 네트워크 영역과 호스트 영역을 나누는 방법이자, 약속이다.

**클래스 별 범위 :**


|클래스|고정 비트|범위|
|:--|:--|:--|
|A|0|0.0.0.0 ~ 127.255.255.255|
|B|10|128.0.0.0 ~ 191.255.255.255|
|C|110|192.0.0.0 ~ 223.255.255.255|
|D (멀티캐스트)|1110|224.0.0.0 ~ 239.255.255.255|
|E (예약됨)|1111|240.0.0.0 ~ 255.255.255.255|


**클래스 A :**

IP 주소를 2진수로 표기했을 때 맨 앞자리 수가 항상 `0`이며 하나의 네트워크가 가질 수 있는 호스트 수가 가장 많은 클래스이다. 주로 국가나 대형 네트워크에서 사용한다.

클래스 A의 네트워크 주소는 10진수로 `1.0.0.0 ~ 126.0.0.0`의 범위를 갖기 때문에 1 ~ 126으로 시작하는 IP 주소는 클래스 A라고 보면 된다.

호스트 주소의 갯수는 `0.0.0` (2진수로 모두가 0인 경우) 은 네트워크 주소로 사용되고 `255.255.255` (2진수로 모두가 1인경우) 은 브로드캐스트 주소로 사용되기 때문에 이 2가지 주소를 제외한 `((2^24) - 2)` 개 이다.

**클래스 B :**

IP 주소를 2진수로 표기했을 때 맨 앞자리 수가 항상 `10`이어야 한다. 주로 중대형 네트워크에서 사용한다.

네트워크 주소 범위는 `10xx xxxx. xxxx xxxx` 에서 x들이 가질 수 있는 경우의 수, `2^14` 개 이다.

호스트 주소 범위는 `xxxx xxxx. xxxx. xxxx` 에서 x들이 가질 수 있는 경우의 수, `((2^16) - 2) 개 이다.

**클래스 C :**

IP주소를 2진수로 표기했을 때 맨 앞자리 수가 항상 `110`이어야 한다. 주로 소형 네트워크에서 사용한다.

네트워크 주소 범위는 `110x xxxx. xxxx xxxx. xxxx xxxx` 에서 x들이 가질 수 있는 경우의 수, `2^21` 개 이다.

호스트 주소 범위는 `xxxx xxxx` 에서 x들이 가질 수 있는 경우의 수, `((2^8) - 2) 개 이다.

<!--클래스 이미지-->

## **Netmask & Subnetmask**
---

### **1. Netmask**

네트워크 주소 부분의 비트를 모두 1로 치환한 것으로 IP 주소와 AND연산을 하게되면 네트워크 주소를 얻을 수 있다.

<!-- 넷마스크 이미지 -->

### **2. Subnet**

IP 주소의 공간 낭비 문제를 해결하기 위해 서브넷이라는 개념을 이용한다. 하나의 네트워크를 쪼개 만든 네트워크로써 즉, 하나의 네트워크는 여러 서브넷으로 나뉠 수 있다. 서브넷으로 나눠서 관리하는 이유는 보안, 관리, 속도, 성능 면에서 이점이 있기 때문이다.

### **3. Subnetmask**

IPv4의 서브넷마스크는 IP 주소와 같이 32비트의 2진수의 형태로 되어 있지만 IP 주소와 달리 클래스 개념이 없고 앞에서부터 순차적으로 1씩 증가한다. 형태가 같은 이유는 IP 주소와 서브넷마스크를 AND연산하기 위해서이다. 서브넷마스크는 네트워크 영역과 호스트 부분을 구분해주는 역할을 한다.

IP를 클래스로 나눈다는 것은, 결국 서브넷마스크를 사용한다는 것과 같은 말이다. 예를 들어 C클래스를 그대로 사용한다는 것은 C클래스 네트워크를 쪼개지 않고 그대로 하나의 네트워크에 할당할 수 있는 `((2^8) - 2)` 개의 호스트 ID를 사용하겠다는 뜻이고 이때는 `255.255.255.0`이 기본 서브넷마스크가 된다. 즉, 별개의 서브넷마스크를 생성하지 않아도 기본적으로 적용되어 있는 것이 기본 서브넷마스크이고, 기본 서브넷마스크로 쪼개진 네트워크 주소를 서브넷 네트워크라고 한다.

**IP 클래스별 기본 서브넷마스크 :**

|클래스|IP 주소 범위|서브넷 마스크|
|:--|:--|:--|
|A|1.0.0.0 ~ 127.255.255.255|255.0.0.0|
|B|128.0.0.0 ~ 191.255.255.255|255.255.0.0|
|C|192.0.0.0 ~ 223.255.255.255|255.255.255.0|

기본 서브넷마스크의 형태를 보면, 네트워크 부분의 비트만 1로 치환한 형태이다. 기본 서브넷마스크는 넷마스크라고도 할 수 있는 것이다.

요즘에는 뚜렷하게 넷마스크와 서브넷마스크를 구분하지 않는다. 왜냐하면 CIDR 이후(현재) 서브넷마스크만 쓰기 때문이다.


### **4. Network / Broadcast 주소**

**네트워크 주소**

하나의 네트워크를 통칭하기 위한 주소로 해당 네트워크의 첫번째 IP 주소이다. 계산 방법은 IP 주소와 서브넷마스크의 AND연산을 하면 된다.

**브로드캐스트 주소**

특정 네트워크에 속하는 모든 호스트들이 갖게 되는 주소로 해당 네트워크에 속하는 모든 IP 주소 가운데 맨 마지막 IP 주소이다. 네트워크에 있는 클라이언트 모두에게 데이터를 보내기 위해 존재한다. 계산 방법은 서브넷마스크의 `0`인 부분을 `1`로 바꾸면 된다.

> *참고 : 보통 라우터 주소는 네트워크 주소와 브로드캐스트 주소, 이 둘을 제외한 호스트 범위 중 가장 앞의 주소일 가능성이 높다.*

### **5. Subnetting**

IP 주소 낭비를 막기위해 원본 네트워크를 서브넷마스크를 이용하여 여러 개의 서브넷 네트워크로 나누는 작업이다. IP를 사용하는 네트워크 장치들의 수에 따라 효율적으로 사용할 수 있도록 하는 것이다.

예시로 클래스 A의 IP 주소 `1.1.1.1`의 기본 서브넷마스크 `255.0.0.0`을 클래스 B의 서브넷마스크 `255.255.0.0`으로 변경해보자. 변경된 서브넷마스크로 AND연산을 하게되면 네트워크 ID가 `1.0.0.0`에서 `1.1.0.0`으로 확장된다. 반대로 호스트의 범위는 기존의 `0.0.0.0 ~ 0.255.255.255` (약 16,777,216개) 에서 `0.0.0.0 ~ 0.0.255.255` (약 65,534개)로 훨씬 적어졌음을 알 수 있다.

다른 예시 :

<!-- 예시 2 이미지 -->

> *참고 : 도메인 네임(DOMAIN NAME)*
>- *사용자들이 쉽게 인식하고 사용할 수 있도록 숫자로 표기된 IP 주소를 문자 형태로 표시하는 인터넷 주소*  
>*예 : www(호스트).sample(기관명).co(소속기관 종류).kr(소속국가)*
>- *DNS : 도메인 네임을 IP 주소로 변경해주는 작업 수행*

**Subnetting 특징**

* 서브네팅을 통해 네트워크 ID가 확장되므로 인해 할당될 수 있는 네트워크의 수가 늘어난다. 하지만 네트워크가 분리됨으로 서로가 통신하기 위해서는 라우터를 통해서만 가능하다. 물론 같은 네트워크에 속해 있는 호스트들은 라우터를 거치지 않고 통신이 가능하다.

* 특정 몇 군데의 호스트에서 너무 많은 트래픽을 발생시켜서 속도를 저하시키는 문제를 해결할 수 있다. 이는 서브네팅을 통하여 네트워크가 분리되기 때문에 브로드캐스트 도메인의 크기가 줄어들게 되므로 가능한 일이다. (브로드캐스트 주소가 다양해짐)

> *참고 : 서브넷의 브로드캐스트 주소란?*  
>- *서브넷의 브로드캐스트 주소는 255보다 훨씬 작은 수를 가질 수 있게 된다. 한 브로드캐스트 주소를 너무 많은 호스트가 갖는 걸 방지할 수 있기 때문에 트래픽 문제를 해결할 수 있는 것이다.*

**Subnetting 계산**

서브넷마스크는 2진수로 표기했을 때 네트워크 ID 부분은 1이 연속적으로 있어야하고, 호스트 ID 부분은 0이 연속적으로 있어야 한다. 즉, 중간에 1이나 0이 섞이면서 나열될 수 없다. 이로 인해 서브넷마스크가 네트워크 ID를 확장하면서 1비트씩 확보하게 되면 네트워크 할당 가능 수가 2배로 증가하고 반대로 호스트 할당 가능 수가 2배로 줄어들게 된다.

`194.139.10.7/25`라는 IP를 서브네팅 하는 예시 :

|서브네팅|IP 주소|할당 객체|
|:--|:--|:--|
|194.139.10.0/25|194.139.10.0|네트워크 주소|
||194.139.10.1 ~ 194.139.10.126|호스트 IP|
||194.139.10.127|브로드캐스트 주소|
|194.139.10.128/25|194.139.10.128|네트워크 주소|
||194.139.10.129 ~ 194.139.10.254|호스트 IP|
||194.139.10.255|브로드캐스트 주소|

### **6. CIDR**

CIDR(Classless Inter-Domain Routing)은 클래스로만 구분된 네트워크의 한계를 극복하기 위한 수단으로 개발되었다. 기존의 클래스만은 이용하면 서브넷마스크는 8자리 단위로만 끊기게 되어 낭비되는 것이 많은 반면 CIDR을 이용하면 네트워크 ID로 사용하는 범위를 자유롭게 표기할 수 있게 되어 네트워크를 조금 더 세부적인 단위로 쪼갤 수 있다. 서브넷과 CIDR은 결국 네트워크를 자른다는 의미는 같지만 CIDR은 특수한 표기법을 따른다.

예시 :

`192.168.0.1` (주소)  
`255.255.255.0` (서브넷마스크)  
이런 서브넷마스크를 갖는 주소는 CIDR로 표기하면  
`192.168.0.1/24` 가 된다.  
`/` 뒤에 적힌 숫자는 몇 개의 비트가 네트워크 ID로서 유효한지를 의미한다. 기존의 클래스로만 구분한다면 뒤에 따라오는 숫자는 8, 16, 24정도였겠지만 CIDR에서는 17,25 등으로로 표기할 수 있다.

## **공인(Public) & 사설(Private) IP**
---

### **1. 공인 IP**

인터넷 사용자의 로컬 네트워크를 식별하기 위해 ISP(인터넷 서비스 공급자)가 제공하는 IP주소이다. 공용 IP주소라고도 불리며 외부에 공개되어 있는 IP 주소이다.

* 공인 IP는 전 세계에서 유일한 IP 주소를 갖는다.
* 공인 IP 주소가 외부에 공개되어 있기에 인터넷에 연결된 다른 PC로부터의 접근이 가능하다. 따라서 공인 IP 주소를 사용하는 경우 방화벽 등의 보안 프로그램을 설치할 필요가 있다.

### **2. 사설 IP**

일반 가정이나 회사 내 등에 할당된 네트워크의 IP 주소이며, 로컬 IP, 가상 IP라고도 한다. IPv4의 주소 부족으로 인해 서브넷팅된 IP이기 때문에 라우터에 의해 로컬 네트워크 상의 PC나 장치에 할당된다.

사설 IP 주소 대역 :

|클래스|범위|
|:--|:--|
|A|10.0.0.0 ~ 10.255.255.255|
|B|172.16.0.0 ~ 172.31.255.255|
|C|192.168.0.0 ~ 192.168.255.255|

### **3. 공인 IP와 사설 IP의 차이점**

공인 IP 주소는 어떠한 네트워크가 갖는 고유한 주소이고 사설 IP 주소는 하나의 네트워크 안에서 주어지는 상대적인 주소이다. 비유로 예를 들자면, 집 주소로 xx시 xx구 xx로 xx동 xx호는 어디서 보든 한 곳을 가리키는 공인 주소이지만, 단순히 101호, 302호 같은 형태의 주소는 어떤 건물인지, 어떤 구인지 등에 따라 상대적이다. 이것이 사설 IPv4라고 볼 수 있다.

이런 개념의 탄생 배경은 IPv4가 할당할 수 있는 네트워크 수가 고갈되고 있고, 지금은 과거와 비교해 무수히 많은 기기가 인터넷에 접근해야 하기 때문이다. 그래서 많은 부분을 각설하고 모두가 익숙한 와이파이의 개념으로 풀어보자면 공인 IP는 라우터의 주소, 사설 IP는 그 라우터에 연결된 각각의 기기의 주소이다. 이렇게 하면, 우리 집에는 하나의 네트워크만이 연결되지만, 그 안에는 많은 기기가 고유한 주소를 가진 채로 그 네트워크를 통해 다른 네트워크와 소통할 수 있는 것이다. 단, 다른 집의 다른 네트워크와 컴퓨터가 내 컴퓨터와 동일한 사설 IP를 가질 수 있다. 물론 그 두 컴퓨터의 공인 IP는 각자 라우터가 받아오는 네트워크의 주소이기 때문에 다르다.

||공인 IP (Public IP)|사설 IP (Private IP)|
|:--|:--|:--|
|할당 주체|ISP (인터넷 서비스 공급자)|라우터 (공유기)|
|할당 대상|개인 또는 회사의 서버 (라우터)|개인 또는 회사의 기기|
|고유성|인터넷 상에서 유일한 주소|하나의 네트워크 안에서 유일|
|공개 여부|내/외부 접근 가능|외부 접근 불가능|

> *참고 : 사설 IP 주소만으로는 인터넷에 직접 연결할 수 없다. 라우터를 통해 1개의 공인(Public) IP만 할당하고, 라우터에 연결된 개인 PC는 사설(Private) IP를 각각 할당 받아 인터넷에 접속할 수 있게 된다.*

<!-- world wide wed 이미지 -->

### **4. 고정 IP & 유동 IP**

고정 IP는 컴퓨터에 고정적으로 부여된 IP로 한번 부여되면 IP를 반납하기 전까지는 다른 장비에 부여할 수 없는 IP 주소를 말한다.

유동 IP는 장비에 고정적으로 IP를 부여하지 않고 컴퓨터를 사용할 때 남아 있는 IP 중에서 돌아가면서 부여한는 IP이다.

인터넷 상에서 서버를 운영하고자 할 때는 공인 IP를 고정 IP로 부여해야 한다. 즉, 공인 IP를 부여받지 못 한다면 다른 사람이 내 서버에 접속할 수 없고, 고정 IP를 부여하지 않으면 내 서버가 아닌 다른 사람의 서버로 접속이 될 수도 있기 때문이다.

반면에 우리가 집에서 사용하는 인터넷 서비스 업체는 각 가정마다 공인 IP를 유동 IP로 부여하고, 공유기 내부에서는 사설 IP를 유동 IP로 부여하는 것이 일반적이다.

## **Transport Layer**
---

